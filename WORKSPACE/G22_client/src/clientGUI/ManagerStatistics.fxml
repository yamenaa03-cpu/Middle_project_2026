<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ChoiceBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="780" prefWidth="1200"
            style="-fx-background-color: #F6F7FB;"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="clientGUI.ManagerStatisticsController">

    <!-- TOP BAR -->
    <top>
        <HBox spacing="12" style="-fx-padding: 14; -fx-background-color: white;">
            <Label style="-fx-font-size: 20; -fx-font-weight: bold;" text="ðŸ“Š Manager Statistics" />
            <Pane HBox.hgrow="ALWAYS" />

            <Label style="-fx-font-weight: bold;" text="Month:" />
            <ChoiceBox fx:id="monthChoice" prefWidth="160" />

            <Label style="-fx-font-weight: bold;" text="Year:" />
            <ChoiceBox fx:id="yearChoice" prefWidth="110" />

            <Button fx:id="btnLoadSubscriber" onAction="#onLoadSubscriberReport" text="Load Subscriber Report" />
            <Button fx:id="btnLoadTime" onAction="#onLoadTimeReport" text="Load Time Report" />
            <Button fx:id="btnLoadBoth" onAction="#onLoadBoth" text="Load Both" />

            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="btnClose" onAction="#onClose" text="Close" />
        </HBox>
    </top>

    <center>
        <VBox spacing="12" style="-fx-padding: 14;">
            <Label fx:id="statusLabel" style="-fx-text-fill: #444; -fx-font-weight: 700;" text="" />
            <Separator />

            <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: transparent;">
                <!-- SUBSCRIBER REPORT -->
                <Tab text="ðŸ‘¥ Subscriber Report">
                    <VBox spacing="10" style="-fx-padding: 12;">
                        <Label style="-fx-font-size: 16; -fx-font-weight: bold;" text="Subscriber Activity" />
                        <BarChart fx:id="subscriberBarChart" prefHeight="560">
                            <xAxis>
                                <CategoryAxis fx:id="subscriberXAxis" label="Subscriber" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="subscriberYAxis" label="Count" />
                            </yAxis>
                        </BarChart>
                    </VBox>
                </Tab>

                <!-- TIME REPORT -->
                <Tab text="ðŸ•’ Time Report">
                    <VBox spacing="10" style="-fx-padding: 12;">
                        <Label style="-fx-font-size: 16; -fx-font-weight: bold;"
                               text="Arrival Delay + Session Duration" />
                        <LineChart fx:id="timeLineChart" prefHeight="560">
                            <xAxis>
                                <CategoryAxis fx:id="timeXAxis" label="Reservation" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="timeYAxis" label="Minutes" />
                            </yAxis>
                        </LineChart>
                    </VBox>
                </Tab>
            </TabPane>
        </VBox>
    </center>

</BorderPane>
